define(['exports', 'preact/jsx-runtime', 'preact', 'preact/hooks', './PRIVATE_TransitionGroup', './hooks/UNSAFE_useAnimation', './hooks/UNSAFE_useMessagesContext', './useAnimation-bc5efb9f'], (function(e,n,t,i,r,a,s,o){"use strict";const c={};function u({animationStates:e=c,initialAnimationStyles:t,onEntering:a,onExiting:u,...d}){const[l,g]=i.useState("entering"),m=i.useRef(),x=i.useRef(),{controller:v,nodeRef:f}=o.useAnimation(l,{animationStates:e,isAnimatedOnMount:!0,onAnimationEnd:i.useCallback((()=>{m.current?.(),m.current=void 0,x.current?.(),x.current=void 0}),[])}),{addBusyState:y}=s.useMessagesContext(),k=i.useCallback(((n,t,i)=>{m.current&&(m.current=void 0,v.cancel()),x.current?.(),x.current=void 0,a?.(n,void 0,i),g("entering"),void 0!==e.entering||void 0!==e["exiting => entering"]?(m.current=t,x.current=y?.("messages animating")):t?.()}),[e,v,y,a]),A=i.useCallback(((n,t,i)=>{m.current&&(m.current=void 0,v.cancel()),x.current?.(),x.current=void 0,u?.(n,void 0,i),g("exiting"),void 0!==e.exiting||void 0!==e["entering => exiting"]?(m.current=t,x.current=y?.("messages animating")):t?.()}),[e,v,y,u]);return i.useLayoutEffect((()=>()=>x.current?.()),[]),n.jsx("div",{ref:f,style:t,children:n.jsx(r.Transition,{...d,onEntering:k,onExiting:A})})}e.MessagesManager=function({data:e,animationStates:a,children:s,initialAnimationStyles:o,onMessageWillRemove:c}){const d=i.useCallback((async(e,n)=>{n&&c?.(n.key,n.index,e)}),[c]);return n.jsx(r.TransitionGroup,{elementType:t.Fragment,children:e.map(((e,t)=>n.jsx(u,{animationStates:a,initialAnimationStyles:o,metadata:{index:t,key:e.key},onExited:d,children:s?.({index:t,item:e})},e.key)))})}}));
//# sourceMappingURL=MessagesManager-d1ae0a38.js.map
